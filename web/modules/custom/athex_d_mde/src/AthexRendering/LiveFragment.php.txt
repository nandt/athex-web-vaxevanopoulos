<?php

namespace Drupal\athex_d_mde\AthexRendering;

use Drupal\Core\Url;


class LiveFragment {

	protected string $routeId;
	protected array $routeParams;

	public function __construct(string $renderRouteId, array $routeParams = []) {
		$this->routeId = $renderRouteId;
		$this->routeParams = $routeParams;
	}

	public function render() {
		$url = Url::fromRoute(
			$this->routeId,
			$this->routeParams
		);
		return [[
			'#type' => 'container',
			'#attributes' => [
				'class' => ['live-render'],
				'data-live-render' => $url->toString()
			],
			'#attached' => [
				'library' => [
					'athex_d_mde/live-render'
				],
			]
		]];
	}
}
